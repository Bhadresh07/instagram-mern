[{"/home/ubuntu/begin/server/client/src/index.js":"1","/home/ubuntu/begin/server/client/src/components/screen/signup.js":"2","/home/ubuntu/begin/server/client/src/components/screen/userProfile.js":"3","/home/ubuntu/begin/server/client/src/components/screen/home.js":"4","/home/ubuntu/begin/server/client/src/reportWebVitals.js":"5","/home/ubuntu/begin/server/client/src/components/screen/CreatePost.js":"6","/home/ubuntu/begin/server/client/src/components/screen/profile.js":"7","/home/ubuntu/begin/server/client/src/App.js":"8","/home/ubuntu/begin/server/client/src/components/screen/signin.js":"9","/home/ubuntu/begin/server/client/src/components/navbar.js":"10","/home/ubuntu/begin/server/client/src/reducer/userReducer.js":"11"},{"size":500,"mtime":1606936427564,"results":"12","hashOfConfig":"13"},{"size":3404,"mtime":1609954939946,"results":"14","hashOfConfig":"13"},{"size":4140,"mtime":1609956874768,"results":"15","hashOfConfig":"13"},{"size":5172,"mtime":1610279455617,"results":"16","hashOfConfig":"13"},{"size":362,"mtime":1606936427564,"results":"17","hashOfConfig":"13"},{"size":2713,"mtime":1609953853701,"results":"18","hashOfConfig":"13"},{"size":3490,"mtime":1610039345414,"results":"19","hashOfConfig":"13"},{"size":1833,"mtime":1610122851092,"results":"20","hashOfConfig":"13"},{"size":2259,"mtime":1609606662723,"results":"21","hashOfConfig":"13"},{"size":3276,"mtime":1610281025753,"results":"22","hashOfConfig":"13"},{"size":524,"mtime":1609959022477,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1e1zmgy",{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"33"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/ubuntu/begin/server/client/src/index.js",[],["53","54"],"/home/ubuntu/begin/server/client/src/components/screen/signup.js",["55"],"import React,{useState,useEffect} from 'react'\nimport {Link,useHistory} from 'react-router-dom'\nimport M from 'materialize-css'\n\nconst Signup = ()=>{\n    const history = useHistory()\n    const [name,setName] = useState(\"\")\n    const [password,setPassword] = useState(\"\")\n    const [email,setEmail] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(undefined)\n    \n    useEffect(()=>{\n      if(url)\n      {\n        uploadPic()  \n      }\n    },[url])\n\n    const uploadPic = ()=>{\n       const data = new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"insta-clone\")\n        data.append(\"cloud_name\",\"doehzrtdh\")\n        \n        fetch(\"https://api.cloudinary.com/v1_1/doehzrtdh/image/upload\",{\n            method:\"post\",\n            body:data\n        })\n        .then(res=>res.json())\n        .then(data=>{\n           setUrl(data.url)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n   \n    const uploadFields=()=>{\n       if (!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email))\n     {\n       M.toast({html:\"invalid email\",classes:\"#ff8a80 red accent-1\"})  \n       return \n     }\n        fetch(\"/signup\",{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body:JSON.stringify({\n                name,\n                password,\n                email,\n                pic:url\n            })\n        }).then(res=>res.json())\n            .then(data=>{\n                if(data.error){\n                    M.toast({html:data.error,classes:\"#ff8a80 red accent-1\"})\n                }\n                else{\n                    M.toast({html:data.message,classes:\"#81c784 green lighten-2\"})\n                    history.push('/signin')\n                }\n                console.log(data)\n        }).catch(error=>{\n            console.log(error)\n        })\n    } \n\n    const PostData=()=>{\n        if(image)\n        {\n          uploadPic()  \n        }\n        else\n        {\n          uploadFields()  \n        } \n    }\n\n    return (\n        <div className=\"mycard\">\n        <div className=\"card auth-card\">\n          <h2>Instagram</h2>\n          <input\n           type=\"text\"\n           placeholder=\"name\"\n           value={name}\n           onChange={(e)=>setName(e.target.value)}\n           />\n          <input\n           type=\"text\"\n           placeholder=\"email\"\n           value={email}\n           onChange={(e)=>setEmail(e.target.value)}\n           />\n           <input\n           type=\"password\"\n           placeholder=\"password\"\n           value={password}\n           onChange={(e)=>setPassword(e.target.value)}\n           />\n           <div className=\"file-field input-field\">\n            <div className=\"btn\">\n                <span>Upload Image</span>\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])}/>\n            </div>\n            <div className=\"file-path-wrapper\">\n                <input className=\"file-path validate\" type=\"text\"/>\n            </div>\n            </div>\n           <button className=\"btn waves-effect waves-light\" onClick={()=>PostData()}>\n               Sign Up\n           </button> \n           <h5>\n               <Link to=\"/signin\">Don't have an account</Link>\n           </h5>  \n        </div>\n        </div>\n    )\n}\n\nexport default Signup","/home/ubuntu/begin/server/client/src/components/screen/userProfile.js",["56"],"import React,{useState,useEffect,useContext} from 'react'\nimport {UserContext} from '../../App'\nimport {useParams} from 'react-router-dom'\n\n\nconst UserProfile = ()=>{\n    const [profile,setProfile] = useState(null)\n    const {state,dispatch} = useContext(UserContext)\n    const {id} = useParams()\n    const [follow,setFollow] = useState(state?(state.followers.includes(id)):\"0\")\n    useEffect(()=>{\n      fetch(`/profile/${id}`,{\n          headers:{\n              \"Authorization\": `Bearer ${localStorage.getItem(\"jwt\")}`\n          }\n      })\n      .then(res=>res.json())\n      .then(result=>{ \n         setProfile(result)\n      })\n      .catch(err=>{\n          console.log(err)\n      })\n    },[])\n\n    const followuser=()=>{\n       fetch(\"/follow\",{\n           method:\"put\",\n           headers:{\n               \"Authorization\":`Bearer ${localStorage.getItem(\"jwt\")}`,\n               \"Content-Type\": \"application/json\"\n           },\n           body:JSON.stringify({\n               followId:id\n           })\n       }).then(res=>res.json())\n       .then(result=>{\n           dispatch({type:\"UPDATE\",payload:{following:result.following,followers:result.followers}})\n           localStorage.setItem(\"user\",JSON.stringify(result))\n           setProfile((prevState)=>{\n               return {...prevState,\n               user:{\n                   ...prevState.user,\n                   followers:[...prevState.user.followers,result._id]\n               }\n            }\n           })\n           setFollow(true)\n       })\n    }\n    \n    const unfollowuser=()=>{\n       fetch(\"/unfollow\",{\n           method:\"put\",\n           headers:{\n               \"Authorization\":`Bearer ${localStorage.getItem(\"jwt\")}`,\n               \"Content-Type\": \"application/json\"\n           },\n           body:JSON.stringify({\n               unfollowId:id\n           })\n       }).then(res=>res.json())\n       .then(result=>{\n           dispatch({type:\"UPDATE\",payload:{following:result.following,followers:result.followers}})\n           localStorage.setItem(\"user\",JSON.stringify(result))\n           setProfile((prevState)=>{\n               const newFollowers = prevState.user.followers.filter(item=>item!==result._id)\n               return {...prevState,\n               user:{\n                   ...prevState.user,\n                   followers:newFollowers\n               }\n            }\n           })\n           setFollow(false)\n       })\n    }\n    return (\n        <>\n        {profile&&\n        <div style={{maxWidth:\"550px\",margin:\"0px auto\"}}>\n            <div style={{\n                display:\"flex\",\n                justifyContent:\"space-around\",\n                margin:\"18px 0px\",\n                borderBottom:\"1px solid grey\"\n            }}>\n                <div>\n                    <img style={{width:\"160px\",height:\"160px\",borderRadius:\"80px\"}}src={state&&state.pic} alt=\"im\">\n                    </img>\n                </div>\n                {profile!=null?\n                <div>\n                    <h4>{profile.user.name}</h4>\n                    <div style={{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"}}>\n                        <h6>{profile.post.length} post</h6>\n                        <h6>{profile.user.followers.length} followers</h6>\n                        <h6>{profile.user.following.length} following</h6>\n                    </div>\n                    {follow?\n                    <button className=\"btn waves-effect waves-light\" onClick={()=>unfollowuser()}>\n                        Unfollow\n                    </button>:\n                    <button className=\"btn waves-effect waves-light\" onClick={()=>followuser()}>\n                        Follow\n                    </button>\n                    }  \n                </div>\n                :<h4>\"loading\"</h4>\n               }\n            </div>\n            <div className=\"gallery\">\n                {\n                    profile.post.map(item=>(\n                        <img className=\"item\" key={item._id} src={item.photo} alt={item.title}/>        \n                    ))  \n                }\n            </div>\n        </div>}\n        </>\n    )\n}\n\nexport default UserProfile",["57","58"],"/home/ubuntu/begin/server/client/src/components/screen/home.js",["59"],"/home/ubuntu/begin/server/client/src/reportWebVitals.js",[],["60","61"],"/home/ubuntu/begin/server/client/src/components/screen/CreatePost.js",[],"/home/ubuntu/begin/server/client/src/components/screen/profile.js",["62","63"],"/home/ubuntu/begin/server/client/src/App.js",["64"],"import React,{useEffect,createContext,useReducer,useContext} from 'react';\nimport './App.css';\nimport Navbar from './components/navbar'\nimport {BrowserRouter,Route,Switch,useHistory} from 'react-router-dom'\nimport Home from './components/screen/home'\nimport Profile from './components/screen/profile'\nimport Signin from './components/screen/signin'\nimport Signup from './components/screen/signup'\nimport CreatePost from './components/screen/CreatePost'\nimport UserProfile from './components/screen/userProfile'\nimport FollowerPost from './components/screen/FollowerPost'\n\nimport { reducer,initialState } from './reducer/userReducer';\n\nexport const UserContext = createContext()\n\nconst Routing=()=>{\n  const history = useHistory()\n  const {state,dispatch}=useContext(UserContext)\n  useEffect(()=>{\n   const user = JSON.parse(localStorage.getItem(\"user\"))\n   if(user)\n   {\n     dispatch({type:\"USER\",payload:user})\n     history.push('/')\n   }\n   else\n   {\n     history.push('/signin')\n   }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[])\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n       <Home/>\n      </Route>\n      <Route exact path=\"/profile\">\n       <Profile/>\n      </Route>\n      <Route path=\"/signin\">\n       <Signin/>\n      </Route>\n      <Route path=\"/signup\">\n       <Signup/>\n      </Route>\n      <Route path=\"/createpost\">\n       <CreatePost/>\n      </Route>\n      <Route path=\"/profile/:id\">\n       <UserProfile/>\n      </Route>\n      <Route path=\"/followerposts\">\n       <FollowerPost/>\n      </Route>\n    </Switch>\n  )\n}\nfunction App() {\n  const [state, dispatch] = useReducer(reducer,initialState)\n  return (\n    <UserContext.Provider value={{state,dispatch}}>\n     <BrowserRouter>\n     <Navbar/>\n     <Routing/>\n     </BrowserRouter>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n","/home/ubuntu/begin/server/client/src/components/screen/signin.js",["65"],"import React,{useState,useContext} from 'react'\nimport {Link,useHistory} from 'react-router-dom'\nimport M from 'materialize-css'\nimport { UserContext } from '../../App'\nconst Signin = ()=>{\n    const history = useHistory()\n    const [password,setPassword] = useState(\"\")\n    const [email,setEmail] = useState(\"\")\n    const {state,dispatch} = useContext(UserContext)\n    const PostData=()=>{\n     if (!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email))\n     {\n       M.toast({html:\"invalid email\",classes:\"#ff8a80 red accent-1\"})  \n      return \n     }\n        fetch(\"/signin\",{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body:JSON.stringify({\n                password,\n                email\n            })\n        }).then(res=>res.json())\n            .then(data=>{\n                console.log(data)\n                if(data.error){\n                    M.toast({html:data.error,classes:\"#ff8a80 red accent-1\"})\n                }\n                else{\n                    localStorage.setItem(\"jwt\",data.token)\n                    localStorage.setItem(\"user\",JSON.stringify(data.user))\n                    dispatch({type:\"USER\",payload:data.user})\n                    M.toast({html:\"signedin successfully\",classes:\"#81c784 green lighten-2\"})\n                    history.push('/')\n                }\n                console.log(data)\n        }).catch(error=>{\n            console.log(error)\n        })\n    }\n    return (\n        <div className=\"mycard\">\n        <div className=\"card auth-card\">\n          <h2>Instagram</h2>\n          <input\n           type=\"text\"\n           placeholder=\"email\"\n           value={email}\n           onChange={(e)=>setEmail(e.target.value)}\n           />\n           <input\n           type=\"password\"\n           placeholder=\"password\"\n           value={password}\n           onChange={(e)=>setPassword(e.target.value)}\n           />\n           <button className=\"btn waves-effect waves-light\" onClick={()=>PostData()}>\n               Signin\n           </button> \n           <h5>\n               <Link to=\"/signup\">Already have account</Link>\n           </h5> \n        </div>\n        </div>\n    )\n}\n\nexport default Signin","/home/ubuntu/begin/server/client/src/components/navbar.js",[],"/home/ubuntu/begin/server/client/src/reducer/userReducer.js",[],{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":18,"column":7,"nodeType":"72","endLine":18,"endColumn":12,"suggestions":"73"},{"ruleId":"70","severity":1,"message":"74","line":24,"column":7,"nodeType":"72","endLine":24,"endColumn":9,"suggestions":"75"},{"ruleId":"66","replacedBy":"76"},{"ruleId":"68","replacedBy":"77"},{"ruleId":"78","severity":1,"message":"79","line":6,"column":18,"nodeType":"80","messageId":"81","endLine":6,"endColumn":26},{"ruleId":"66","replacedBy":"82"},{"ruleId":"68","replacedBy":"83"},{"ruleId":"78","severity":1,"message":"84","line":6,"column":12,"nodeType":"80","messageId":"81","endLine":6,"endColumn":15},{"ruleId":"70","severity":1,"message":"85","line":60,"column":7,"nodeType":"72","endLine":60,"endColumn":14,"suggestions":"86"},{"ruleId":"78","severity":1,"message":"87","line":19,"column":10,"nodeType":"80","messageId":"81","endLine":19,"endColumn":15},{"ruleId":"78","severity":1,"message":"87","line":9,"column":12,"nodeType":"80","messageId":"81","endLine":9,"endColumn":17},"no-native-reassign",["88"],"no-negated-in-lhs",["89"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'uploadPic'. Either include it or remove the dependency array.","ArrayExpression",["90"],"React Hook useEffect has a missing dependency: 'id'. Either include it or remove the dependency array.",["91"],["88"],["89"],"no-unused-vars","'dispatch' is assigned a value but never used.","Identifier","unusedVar",["88"],["89"],"'url' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'dispatch' and 'state'. Either include them or remove the dependency array.",["92"],"'state' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"93","fix":"94"},{"desc":"95","fix":"96"},{"desc":"97","fix":"98"},"Update the dependencies array to be: [uploadPic, url]",{"range":"99","text":"100"},"Update the dependencies array to be: [id]",{"range":"101","text":"102"},"Update the dependencies array to be: [dispatch, image, state]",{"range":"103","text":"104"},[483,488],"[uploadPic, url]",[693,695],"[id]",[1707,1714],"[dispatch, image, state]"]